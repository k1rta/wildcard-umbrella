#!/usr/bin/env sh

# Args: previous HEAD, new HEAD, checkout mode (0=branch, 1=file)
# Only run on branch checkout
if [ "$3" = "1" ]; then
  exit 0
fi

echo "ğŸ”„ Post-checkout hook running..."

# Check if package.json changed
if git diff --name-only $1 $2 | grep -q "package.json\|package-lock.json"; then
  echo "ğŸ“¦ Dependencies changed, running npm install..."
  npm install || {
    echo "âš ï¸ npm install failed - you may need to run it manually"
  }
fi
